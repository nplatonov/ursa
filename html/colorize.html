<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><title>R: Create color table</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="stylesheet" type="text/css" href="file:///C:/Software/R/doc/html/R.css" />
</head><body>

<table width="100%" summary="page for colorize"><tr><td>colorize</td><td style="text-align: right;">R Documentation</td></tr></table>

<h2>
Create color table
</h2>

<h3>Description</h3>

<p><code>colorize</code> assigns color table to raster image.
</p>


<h3>Usage</h3>

<pre>
colorize(obj, value = NULL, breakvalue = NULL, name = NULL, pal = NULL, inv = NA,
         stretch = c("default", "linear", "equal", "mean", "positive",
                     "negative", "diff", "category", "julian", "date", "time",
                     "slope", "conc", "sd", "significance", "bathy",
                     "grayscale", "greyscale", ".onetoone"),
         minvalue = NA, maxvalue = NA, byvalue = NA, ltail = NA, rtail = NA, tail = NA,
         ncolor = NA, nbreak = NA, interval = 0L, ramp = TRUE, byte = FALSE,
         lazyload = FALSE, reset = FALSE, origin = "1970-01-01" ,format = "",
         alpha = "", colortable = NULL, verbose = FALSE, ...)
                          

</pre>


<h3>Arguments</h3>

<table summary="R argblock">
<tr valign="top"><td><code>obj</code></td>
<td>

<p><code>ursaRaster</code> object or one-dimension numeric vector.
</p>
</td></tr>
<tr valign="top"><td><code>value</code></td>
<td>

<p>Numeric. Values to be assigned to categories.
</p>
</td></tr>
<tr valign="top"><td><code>breakvalue</code></td>
<td>

<p>Numeric. Values to be assigned to intervals.
</p>
</td></tr>
<tr valign="top"><td><code>name</code></td>
<td>

<p>Character. Names of categories.
</p>
</td></tr>
</table>



<table summary="R argblock">
<tr valign="top"><td><code>pal</code></td>
<td>

<p>Function or character. If function then value should corresponded to function, which creates a vector of colors. If character then values should correponded to <span style="font-family: Courier New, Courier; color: #666666;"><b>R</b></span> color names or hexadecimal string of the form &quot;#RRGGBB&quot; or &quot;#RRGGBBAA&quot;.
</p>
</td></tr>
</table>



<table summary="R argblock">
<tr valign="top"><td><code>inv</code></td>
<td>

<p>Logical. Invert sequence of colors.
</p>
</td></tr>
<tr valign="top"><td><code>stretch</code></td>
<td>

<p>Character. Either kind of value transformatin (<code>"linear", "equal"</code>) or pre-defined options with palette specification (<code>"positive", "data", "significance"</code>, etc)
</p>
</td></tr>
<tr valign="top"><td><code>minvalue</code></td>
<td>

<p>Numeric. Lower range limit.
</p>
</td></tr>
<tr valign="top"><td><code>maxvalue</code></td>
<td>

<p>Numeric. Upper range limit.
</p>
</td></tr>
<tr valign="top"><td><code>byvalue</code></td>
<td>

<p>Numeric. Increment of the sequence from <code>minvalue</code> to <code>maxvalue</code>.
</p>
</td></tr>
<tr valign="top"><td><code>ltail</code></td>
<td>

<p>Numeric. Partition of omitted values at left tail.
</p>
</td></tr>
<tr valign="top"><td><code>rtail</code></td>
<td>

<p>Numeric. Partition of omitted values at right tail.
</p>
</td></tr>
<tr valign="top"><td><code>tail</code></td>
<td>

<p>Numeric. Partition of omitted values at both tail. If length of <code>tail</code> is 2 then left and right tails may differ.
</p>
</td></tr>
<tr valign="top"><td><code>ncolor</code></td>
<td>

<p>Numeric or interer. Number of desired colors (or categories)
</p>
</td></tr>
<tr valign="top"><td><code>nbreak</code></td>
<td>

<p>Numeric or interer. Number of desired separators between colors.
</p>
</td></tr>
</table>



<table summary="R argblock">
<tr valign="top"><td><code>interval</code></td>
<td>

<p>Integer. How to underwrite categories? Use direct
</p>
</td></tr>
<tr valign="top"><td><code>ramp</code></td>
<td>

<p>Logical. Is color ramp required?
</p>
</td></tr>
<tr valign="top"><td><code>byte</code></td>
<td>

<p>Logical. Forcing to produce color table for storage in byte format (not more than 255 colors). Default is <code>FALSE</code>.
</p>
</td></tr>
<tr valign="top"><td><code>lazyload</code></td>
<td>

<p>Logical. If <code>FALSE</code> then raster is reclassified to categories. If <code>TRUE</code> then color table is created without any change to source raster. Default is <code>FALSE</code>.
</p>
</td></tr>
<tr valign="top"><td><code>reset</code></td>
<td>

<p>Logical. If <code>TRUE</code> and source raster has color table, then this color table is destroyed, and new one is created. Default is <code>FALSE</code>.
</p>
</td></tr>
<tr valign="top"><td><code>origin</code></td>
<td>

<p>Character. Origin for <code>stretch="date"</code> (passed to function <code><a href="../../base/html/as.Date.html">as.Date</a></code>) and <code>stretch="time"</code> (passed to function <code><a href="../../base/html/as.POSIXlt.html">as.POSIXct</a></code>). See desription of <code>orogin</code> in respective functions. Default is &quot;1970-01-01&quot;.
</p>
</td></tr>
<tr valign="top"><td><code>format</code></td>
<td>

<p>Character. Format date/time objects for arguments <code>stretch</code> with values &quot;date&quot;, &quot;time&quot;, or &quot;julian&quot;. Default is &quot;&quot; (character of length 0).
</p>
</td></tr>
<tr valign="top"><td><code>alpha</code></td>
<td>

<p>Character or numeric. The characteristics of transparency. If character, then hexadecimal values between &quot;00&quot; and &quot;FF&quot; are allowed, and then coerced to numeric value between 0 and 255. If numeric, and <code style="white-space: pre;">0 &lt;= alpha &lt;= 1</code>, then <code>alpha</code> is multiplied to 255. <code>alpha=0</code> means full transparency,  <code>alpha=255</code> means full opacity. Default is &quot;&quot;; if palette has no alpha channel, then <code>alpha</code> is assing to <code>"FF"</code>.
</p>
</td></tr>
<tr valign="top"><td><code>colortable</code></td>
<td>

<p>Object of class <code>ursaColorTable</code> or object of class <code>ursaRaster</code> with color table. Reference color table. Is specified, then all other arguments are ignored, expexted <code>lazyload</code>. Default is <code>NULL</code> (unspecified).
</p>
</td></tr>
<tr valign="top"><td><code>verbose</code></td>
<td>

<p>Logical. Some output in console. Primarily for debug purposes.
</p>
</td></tr>
<tr valign="top"><td><code>...</code></td>
<td>

<p>If <code>pal</code> is a function, and argrument names are in the format &quot;<code>pal.*</code>&quot; then prefix &quot;<code>pal.</code>&quot; is omitted, and the rest part is used for argument names, which are passed to <code>pal</code> function.
</p>
</td></tr>
</table>


<h3>Details</h3>

<p><code>colortable</code> is designed to prepare pretty thematic maps.
</p>

<p>Color rampimg (<code>ramp=TRUE</code>) is not quick in computatons and has no effective labelling. It is intoduced to visualize non-thematic maps, and it is assumed that labeling can be omitted for such maps.
</p>
<p>The labelling implementation is based on some improvements of <code><a href="../../base/html/pretty.html">pretty</a></code> function. The notation of intervals is mixed by brackets and comparative symbols, for example: <code>"&lt;=1.5","(1.5,2.5]","(2.5,3.5]","&gt;3.5"</code>
</p>
<p>Reserved values for <code>interval</code>:
</p>

<ul>
<li><p><code>0L</code> or <code>FALSE</code> - no interlavs. Values are interpreted as category, even if they are in non-nominal scale
</p>
</li>
<li><p><code>1L</code> or <code>TRUE</code> - each category corresponds to interval. The low limit of lowest category is <code>-Inf</code>. The high limit of highest category is <code>+Inf</code>
</p>
</li>
<li><p><code>2L</code> - different implementation of <code>interval=1</code>. In some cases may relult more pretty labeling.

</p>
<p>If <code>breaks</code> is numerical vector and <code>colors</code> has zero length, then it is assumed interal scaling, and <code>interval=1L</code> is assigned to unspecified <code>interval</code>
</p>
<p>Finite values of extreme intervals are neccessary sometimes, however this option is not implemented currently
</p>
</li></ul>

<p>Keywords for <code>stretch</code> to create pre-defined color tables:
</p>

<ul>
<li><p><code>"positive"</code> - lower limit is 0. Palette is &quot;Oranges&quot;
</p>
</li>
<li><p><code>"negative"</code> - higher limit is 0. Palette is &quot;Purples&quot;
</p>
</li>
<li><p><code>"grayscale", "greyscale"</code> - palette is &quot;Greys&quot;. Usually used for raw satellite images.
</p>
</li>
<li><p><code>"mean"</code> - designed for common thematic maps and for averaged map across set of maps. Palette is &quot;Spectral&quot;
</p>
</li>
<li><p><code>"sd"</code> - designed for spatial mapping of standard deviation across set of maps. Palette is &quot;YlGnBu&quot;
</p>
</li>
<li><p><code>"diff"</code> - diverge palette &quot;RdBu&quot;. Absolute values of lower and upper limits are equal, zero is in the middle of palette. Designed for anomaly maps.
</p>
</li>
<li><p><code>"slope"</code> - is similar to <code>diff</code> but without extreme colors, which are reserved for contouring of statistically significant areas.
</p>
</li>
<li><p><code>"significance"</code> - desiged to illustrate statistically significant areas of slope.
The realisation is <code>colortable(obj, value=c(-0.999, -0.99, -0.95, -0.9, -0.5, +0.5, +0.9, +0.95, +0.99, +0.999), interval=1L, palname="RdBu")</code>
</p>
</li>
<li><p><code>"category"</code> - Values are interpreted in nominal scale. Palette is based on random colors from &quot;Pairs&quot; palette.
</p>
</li>
<li><p><code>"conc"</code> - designed for visualization of sea ice concentration data, which have lower limit 0 and higher limit 100. Palette is &quot;Blues&quot;
</p>
</li>
<li><p><code>"bathy"</code> - designed for ocean depth (bathymetry) maps. Internally <code>colorize(obj, stretch="equal",interval=1L, palname="Blues", inv=TRUE)</code> is used to detect the crossing from shelf waters to deep water basin. Better practice is to do second step with manual specification of <code>value</code> argument.
</p>
</li>
<li><p><code>"internal"</code> - continuous colors, designed for conversion to greyscale with keeping of intensities.
</p>
</li>
<li><p><code>"default"</code> - allowing to detect stretch by intuition, without any strong mathematical criteria
</p>
</li></ul>

<p>It is allowed manual correction of labels using followed code example:
<code>names(ursa_colortable(x)) &lt;- c("a&lt;=0","0&lt;a&lt;=1","a&gt;1")</code>
</p>


<h3>Value</h3>

<p>Object of class <code>ursaRaster</code> with named character vector of item <code>$colortable</code>





</p>


<h3>Author(s)</h3>

<p>Nikita Platonov <a href="mailto:platonov@sevin.ru">platonov@sevin.ru</a>
</p>


<h3>See Also</h3>

<p><code><a href="../../ursa/html/classColorTable.html">ursa_colortable</a></code>, 
<code><a href="../../ursa/html/classColorTable.html">ursa_colortable&lt;-</a></code>
</p>


<h3>Examples</h3>

<pre>
session_grid(NULL)
a &lt;- pixelsize()-350
print(a)
b1 &lt;- colorize(a,ramp=FALSE)
print(ursa_colortable(b1))
b2 &lt;- colorize(a,interval=1,stretch="positive",ramp=FALSE)
print(ursa_colortable(b2))
b3 &lt;- colorize(a,interval=2,stretch="positive",ramp=FALSE)
print(ursa_colortable(b3))
b4 &lt;- colorize(a,value=c(150,250),interval=1)
print(ursa_colortable(b4))
names(ursa_colortable(b4)) &lt;- c("x&lt;=150","150&lt;x&lt;=250","x&gt;250")
print(ursa_colortable(b4))
display(b4)
</pre>


</body></html>
